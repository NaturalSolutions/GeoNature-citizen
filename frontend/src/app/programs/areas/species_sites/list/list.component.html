<div id="mapList">
    <ng-content select="[obs-form]" *ngIf="display_form"></ng-content>
    <span [class.d-none]="display_form">
        <div class="col-lg-12 mx-4 mt-2 mb-4">
            <strong><span *ngIf="userDashboard">Mes </span>individus </strong>
            <span class="badge badge-pill badge-info">{{ speciesSites?.length }}</span>
            <ng-content select="[add-obs]"></ng-content>
        </div>
        <div id="list">
            <div
                *ngFor="let speciesSite of speciesSites"
                (click)="onSpeciesSiteClick(speciesSite)"
                class="espece"
            >
                <img
                    src="{{
                        speciesSite.properties.photo
                            ? apiEndpoint + speciesSite.properties.photo.url
                            : 'assets/no_photo_light.png'
                    }}"
                />
                <div class="infos">
                    <h5>
                        {{ speciesSite.properties.name }}
                        <span *ngIf="speciesSite.properties.id_role === userService.role_id" class="pull-right">
                            &nbsp;
                            <app-areamodalflow
                                #modalFlowRef
                                [coords]="speciesSite.properties.coords"
                                [speciesSiteUpdateData]="speciesSite.properties"
                            >
                                <i
                                    class="fa fa-edit text-primary"
                                    placement="bottom"
                                    ngbTooltip="Editer"
                                    btn-open
                                ></i>
                            </app-areamodalflow>
                            &nbsp;
                            <i
                                class="fa fa-trash text-danger"
                                placement="bottom"
                                ngbTooltip="Supprimer"
                                (click)="
                                    areaService.deleteSpeciesSite.emit(
                                        speciesSite.properties.id_species_site
                                    )
                                "
                                *ngIf="speciesSite.properties.creator_can_delete"
                                owner-actions
                            ></i>
                        </span>
                    </h5>
                    <p *ngIf="speciesSite.properties.species">
                        {{ speciesSite.properties.species.nom_vern }}
                    </p>
                    <p>
                        le
                        <span>{{
                            speciesSite.properties.timestamp_create.substring(0, 10)
                                | date: 'longDate'
                        }}</span>
                    </p>
                </div>
                <div class="add-species-site-observation">
                    <div title="Ajouter une observation" (click)="onAddSpeciesSiteObservationClick(speciesSite.properties.id_species_site)">
                        +
                    </div>
                </div>
                <div
                    class="hide"
                    [routerLink]="[
                        '/programs',
                        speciesSite.properties.area.id_program,
                        'species_sites',
                        speciesSite.properties.id_species_site
                    ]"
                    style="cursor: pointer"
                    title="Voir les dÃ©tails sur cet individu"
                >
                    <img src="assets/binoculars.png" />
                </div>
            </div>
        </div>
    </span>
</div>
